<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ€„ï¸ éº»å°†ä¸è¦åšæŒ‘æˆ˜ - æš—ç‰Œç‰ˆ</title>
    <style>
        :root {
            --bg-color: #1a4d33;
            --card-front: #f5f5f5;
            --card-back: #2c3e50;
            --accent: #ffcc00;
        }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            text-align: center; 
            background: var(--bg-color); 
            color: white; 
            padding: 20px;
            margin: 0;
        }
        h1 { margin-bottom: 5px; font-size: 1.5rem; }
        .desc { font-size: 0.8rem; color: #bdc3c7; margin-bottom: 20px; }
        
        .grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 15px; 
            max-width: 500px; 
            margin: 0 auto;
        }

        .card { 
            background: var(--card-front); 
            color: #333; 
            border-radius: 12px; 
            padding: 15px; 
            min-height: 160px; 
            display: flex; 
            flex-direction: column; 
            justify-content: center;
            align-items: center;
            cursor: pointer; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.3); 
            transition: all 0.3s ease;
            position: relative;
            border: 2px solid transparent;
        }

        /* éšè—çŠ¶æ€ï¼ˆèƒŒé¢ï¼‰ */
        .card.hidden { 
            background: var(--card-back); 
            border: 2px solid var(--accent);
        }
        .card.hidden .content { opacity: 0; visibility: hidden; }
        .card.hidden::after { 
            content: "ğŸ€„ ç‚¹å‡»ç¿»å¼€"; 
            position: absolute;
            color: var(--accent); 
            font-weight: bold; 
            font-size: 1.1rem;
        }

        /* æ˜¾ç¤ºçŠ¶æ€ï¼ˆæ­£é¢ï¼‰ */
        .content { 
            transition: opacity 0.3s;
            width: 100%;
        }
        .player-tag { 
            font-size: 0.8rem; 
            color: #888; 
            margin-bottom: 10px; 
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
        }
        .topic-label { font-weight: bold; color: #1a4d33; font-size: 0.9rem; }
        .punish-label { font-weight: bold; color: #c0392b; font-size: 0.9rem; margin-top: 10px; }
        .text-detail { font-size: 1.05rem; margin-top: 4px; line-height: 1.4; }

        button { 
            background: #e67e22; 
            color: white;
            border: none; 
            padding: 15px 40px; 
            font-size: 1.1rem; 
            border-radius: 50px; 
            cursor: pointer; 
            font-weight: bold; 
            margin: 25px 0;
            box-shadow: 0 4px 0 #d35400;
        }
        button:active { transform: translateY(2px); box-shadow: 0 2px 0 #d35400; }
        
        #loading-status { font-size: 0.8rem; color: var(--accent); margin-bottom: 10px; }
    </style>
</head>
<body>

    <h1>éº»å°†ä¸è¦åšæŒ‘æˆ˜</h1>
    <p class="desc">å…¨å‘˜ç¦å¿Œæš—ç‰Œæ¨¡å¼</p>

    <div id="loading-status">æ­£åœ¨è¿æ¥é¢˜åº“...</div>
    <button onclick="shuffle()">é‡æ–°éšæœºå‘ç‰Œ</button>

    <div class="grid" id="gameBoard">
        </div>

    <script>
        let gameData = { conditions: [], punishments: [] };

        // 1. è‡ªåŠ¨ä»ä»“åº“è¯»å– data.json
        async function init() {
            const status = document.getElementById('loading-status');
            try {
                const response = await fetch('./data.json');
                if (!response.ok) throw new Error('ç½‘ç»œè¯·æ±‚å¤±è´¥');
                const json = await response.json();
                
                // é€‚é…ä½ æä¾›çš„ JSON ç»“æ„: json.data.conditions
                gameData.conditions = json.data.conditions;
                gameData.punishments = json.data.punishments;
                
                status.innerText = "âœ… é¢˜åº“åŠ è½½å®Œæ¯•ï¼Œå…± " + gameData.conditions.length + " æ¡é¢˜ç›®";
                shuffle(); // åˆå§‹åŠ è½½å³å‘ç‰Œ
            } catch (e) {
                console.error(e);
                status.innerText = "âŒ é¢˜åº“åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ data.json";
                status.style.color = "red";
            }
        }

        // 2. å‘ç‰Œé€»è¾‘
        function shuffle() {
            if (gameData.conditions.length < 4) return;

            const board = document.getElementById('gameBoard');
            board.innerHTML = "";

            // éšæœºæ‰“ä¹±é¢˜ç›®
            let shuffledConds = [...gameData.conditions].sort(() => Math.random() - 0.5);
            let shuffledPuns = [...gameData.punishments].sort(() => Math.random() - 0.5);

            for (let i = 1; i <= 4; i++) {
                const c = shuffledConds[i - 1];
                const p = shuffledPuns[i - 1];
                
                const card = document.createElement('div');
                card.className = "card hidden";
                card.onclick = function() { this.classList.toggle('hidden'); };
                
                card.innerHTML = `
                    <div class="content">
                        <div class="player-tag">ç©å®¶ ${i}</div>
                        <div class="topic-label">ä¸å¯åšçš„ç¦å¿Œï¼š</div>
                        <div class="text-detail">${c}</div>
                        <div class="punish-label">è¿ååçš„æƒ©ç½šï¼š</div>
                        <div class="text-detail">${p}</div>
                    </div>
                `;
                board.appendChild(card);
            }
        }

        // å¯åŠ¨
        init();
    </script>
</body>
</html>
